
CREATE TABLE AH098_HRSR_LETTER
(
    HRSR_LETTER_ID       NUMBER NOT NULL ,
    HRSR_LETTER_ENM      VARCHAR2(50) NOT NULL ,
    HRSR_LETTER_FNM      VARCHAR2(20) NOT NULL ,
    DATE_CREATED_DTE     DATE NULL ,
    DATE_LAST_UPDATE_DTE DATE NULL ,
    USER_LAST_UPDATE_ID  VARCHAR2(30) NULL ,
    DATE_DELETED_DTE     DATE NULL 
);

COMMENT ON TABLE AH098_HRSR_LETTER IS 'Table of the letters in HRSR application. ';

COMMENT ON COLUMN AH098_HRSR_LETTER.HRSR_LETTER_ID IS 'Unique, system generated primary key';

COMMENT ON COLUMN AH098_HRSR_LETTER.HRSR_LETTER_ENM IS 'English name of the HRSR letter';

COMMENT ON COLUMN AH098_HRSR_LETTER.HRSR_LETTER_FNM IS 'French name of the HRSR letter';

COMMENT ON COLUMN AH098_HRSR_LETTER.DATE_CREATED_DTE IS 'The date on which the data item was created and became available for use.';

COMMENT ON COLUMN AH098_HRSR_LETTER.DATE_LAST_UPDATE_DTE IS 'The date the data item was last updated.';

COMMENT ON COLUMN AH098_HRSR_LETTER.USER_LAST_UPDATE_ID IS 'The responsible user that affected the last change of the data record.';

COMMENT ON COLUMN AH098_HRSR_LETTER.DATE_DELETED_DTE IS 'The date from which the data item is no longer allowed to be referenced for any new inserts or updates.
This can only happen for the current day or previous dates.';

CREATE UNIQUE INDEX AH098_PK ON AH098_HRSR_LETTER
(HRSR_LETTER_ID   ASC);

CREATE UNIQUE INDEX AH098_AK1 ON AH098_HRSR_LETTER
(HRSR_LETTER_ENM   ASC);

CREATE UNIQUE INDEX AH098_AK2 ON AH098_HRSR_LETTER
(HRSR_LETTER_FNM   ASC);

CREATE TABLE AH099_HRSR_LETTER_BODY
(
    HRSR_LETTER_BODY_ID  NUMBER NOT NULL ,
    HRSR_LETTER_ID       NUMBER NULL ,
    HRSR_LETTER_SECTION_ID NUMBER NULL ,
    DISPLAY_ORDER_NUM    NUMBER(2,0) NULL ,
    HRSR_LETTER_BODY_ETXT VARCHAR2(4000) NOT NULL ,
    HRSR_LETTER_BODY_FTXT VARCHAR2(4000) NOT NULL ,
    DATE_CREATED_DTE     DATE NULL ,
    DATE_LAST_UPDATE_DTE DATE NULL ,
    USER_LAST_UPDATE_ID  VARCHAR2(30) NULL ,
    DATE_DELETED_DTE     DATE NULL 
);

COMMENT ON TABLE AH099_HRSR_LETTER_BODY IS 'Table to store the letter body sections associated with a letter in HRSR.';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.HRSR_LETTER_BODY_ID IS 'Unique, system generated primary key';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.HRSR_LETTER_ID IS 'Foreign key to AH098_HRSR_LETTER. Identifies the letter assiciated with the record. ';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.HRSR_LETTER_SECTION_ID IS 'Foreign key to TH0188_HRSR_LETTER_SECTION. Identifies the letter section assiciated with the record. ';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.DISPLAY_ORDER_NUM IS 'Display order of the letter body record. ';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.HRSR_LETTER_BODY_ETXT IS 'Full English text of the letter body section.';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.HRSR_LETTER_BODY_FTXT IS 'Full French text of the letter body section.';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.DATE_CREATED_DTE IS 'The date on which the data item was created and became available for use.';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.DATE_LAST_UPDATE_DTE IS 'The date the data item was last updated.';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.USER_LAST_UPDATE_ID IS 'The responsible user that affected the last change of the data record.';

COMMENT ON COLUMN AH099_HRSR_LETTER_BODY.DATE_DELETED_DTE IS 'The date from which the data item is no longer allowed to be referenced for any new inserts or updates.
This can only happen for the current day or previous dates.';

CREATE UNIQUE INDEX AH099_PK ON AH099_HRSR_LETTER_BODY
(HRSR_LETTER_BODY_ID   ASC);

CREATE UNIQUE INDEX AH099_AK1 ON AH099_HRSR_LETTER_BODY
(HRSR_LETTER_ID   ASC,HRSR_LETTER_SECTION_ID   ASC,DISPLAY_ORDER_NUM   ASC);

CREATE INDEX AH099_IF1 ON AH099_HRSR_LETTER_BODY
(HRSR_LETTER_ID   ASC);

CREATE INDEX AH099_IF2 ON AH099_HRSR_LETTER_BODY
(HRSR_LETTER_SECTION_ID   ASC);

CREATE TABLE TH188_HRSR_LETTER_SECTION
(
    HRSR_LETTER_SECTION_ID NUMBER NOT NULL ,
    HRSR_LETTER_SECTION_ENM VARCHAR2(100) NOT NULL ,
    HRSR_LETTER_SECTION_FNM VARCHAR2(100) NOT NULL ,
    DISPLAY_ORDER_NUM    NUMBER(2),
    DATE_CREATED_DTE     DATE NULL ,
    DATE_LAST_UPDATE_DTE DATE NULL ,
    USER_LAST_UPDATE_ID  VARCHAR2(30) NULL ,
    DATE_DELETED_DTE     DATE NULL 
);

COMMENT ON TABLE TH188_HRSR_LETTER_SECTION IS 'Look up table of the section types of a letter generated by HRSR. ';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.HRSR_LETTER_SECTION_ID IS 'Unique, system generated identifier of the letter section. ';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.HRSR_LETTER_SECTION_ENM IS 'English name of the letter section.';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.HRSR_LETTER_SECTION_FNM IS 'French name of the letter section.';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.DISPLAY_ORDER_NUM IS 'Display order of the letter section record. ';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.DATE_CREATED_DTE IS 'The date on which the data item was created and became available for use.';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.DATE_LAST_UPDATE_DTE IS 'The date the data item was last updated.';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.USER_LAST_UPDATE_ID IS 'The responsible user that affected the last change of the data record.';

COMMENT ON COLUMN TH188_HRSR_LETTER_SECTION.DATE_DELETED_DTE IS 'The date from which the data item is no longer allowed to be referenced for any new inserts or updates.
This can only happen for the current day or previous dates.';

CREATE UNIQUE INDEX TH188_PK ON TH188_HRSR_LETTER_SECTION
(HRSR_LETTER_SECTION_ID   ASC);

CREATE UNIQUE INDEX TH188_AK1 ON TH188_HRSR_LETTER_SECTION
(HRSR_LETTER_SECTION_ENM   ASC);

CREATE UNIQUE INDEX TH188_AK2 ON TH188_HRSR_LETTER_SECTION
(HRSR_LETTER_SECTION_FNM   ASC);

ALTER TABLE AH098_HRSR_LETTER
ADD CONSTRAINT  AH098_PK PRIMARY KEY (HRSR_LETTER_ID);

ALTER TABLE AH098_HRSR_LETTER
ADD CONSTRAINT  AH098_AK1 UNIQUE (HRSR_LETTER_ENM);

ALTER TABLE AH098_HRSR_LETTER
ADD CONSTRAINT  AH098_AK2 UNIQUE (HRSR_LETTER_FNM);

ALTER TABLE AH099_HRSR_LETTER_BODY
ADD CONSTRAINT  AH099_PK PRIMARY KEY (HRSR_LETTER_BODY_ID);

ALTER TABLE AH099_HRSR_LETTER_BODY
ADD CONSTRAINT  AH099_AK1 UNIQUE (HRSR_LETTER_ID,HRSR_LETTER_SECTION_ID,DISPLAY_ORDER_NUM);

ALTER TABLE TH188_HRSR_LETTER_SECTION
ADD CONSTRAINT  TH188_PK PRIMARY KEY (HRSR_LETTER_SECTION_ID);

ALTER TABLE TH188_HRSR_LETTER_SECTION
ADD CONSTRAINT  TH188_AK1 UNIQUE (HRSR_LETTER_SECTION_ENM);

ALTER TABLE TH188_HRSR_LETTER_SECTION
ADD CONSTRAINT  TH188_AK2 UNIQUE (HRSR_LETTER_SECTION_FNM);

ALTER TABLE AH099_HRSR_LETTER_BODY
ADD CONSTRAINT AH099_AH098_FK FOREIGN KEY (HRSR_LETTER_ID) REFERENCES AH098_HRSR_LETTER (HRSR_LETTER_ID);

ALTER TABLE AH099_HRSR_LETTER_BODY
ADD CONSTRAINT AH099_TH188_FK FOREIGN KEY (HRSR_LETTER_SECTION_ID) REFERENCES TH188_HRSR_LETTER_SECTION (HRSR_LETTER_SECTION_ID);

CREATE OR REPLACE PUBLIC SYNONYM AH098_HRSR_LETTER FOR TIPS.AH098_HRSR_LETTER;
CREATE OR REPLACE PUBLIC SYNONYM AH099_HRSR_LETTER_BODY FOR TIPS.AH099_HRSR_LETTER_BODY;
CREATE OR REPLACE PUBLIC SYNONYM TH188_HRSR_LETTER_SECTION FOR TIPS.TH188_HRSR_LETTER_SECTION;

GRANT SELECT ON AH098_HRSR_LETTER TO tipsuser;
GRANT SELECT, INSERT, UPDATE, DELETE ON AH098_HRSR_LETTER TO everything_in_tips;

GRANT SELECT ON AH099_HRSR_LETTER_BODY TO tipsuser;
GRANT SELECT, INSERT, UPDATE, DELETE ON AH099_HRSR_LETTER_BODY TO everything_in_tips;

GRANT SELECT ON TH188_HRSR_LETTER_SECTION TO tipsuser;
GRANT SELECT, INSERT, UPDATE, DELETE ON TH188_HRSR_LETTER_SECTION TO everything_in_tips;


